CREATE TABLE IF NOT EXISTS `remito` ( `id_remito` bigint(20) NOT NULL AUTO_INCREMENT, `id_cliente` bigint(20) NULL,`fecha` datetime NOT NULL,   `id_forma_pago` int(11) NOT NULL, `serie` int(5) NOT NULL, `numero` int(5) NOT NULL, `total` Decimal(20,3),  `id_ctacte` bigint(20) NULL,    `id_mov_caja` bigint(20) NULL, `anulada` boolean NOT NULL, `razon` text COLLATE utf8_spanish_ci, `fecha_cancelada` datetime DEFAULT NULL, `observaciones` tinytext DEFAULT NULL, PRIMARY KEY (`id_remito`), UNIQUE KEY `remito-serie-numero` (`serie`,`numero`),     FOREIGN KEY (`id_cliente`) REFERENCES `clientes`( `id` ),     FOREIGN KEY (`id_ctacte`) REFERENCES `item_ctacte`( `id_op_ctacte` ), FOREIGN KEY (`id_mov_caja`) REFERENCES `movimiento_caja`( `id_movimiento` )) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;
CREATE TABLE IF NOT EXISTS `item_remito` ( `id_item_remito` bigint(20) NOT NULL AUTO_INCREMENT, `id_remito` bigint(20) NOT NULL,    `cantidad` decimal(20,3) NOT NULL, `texto` text NOT NULL, `precio_unitario` decimal(20,3) NOT NULL, `id_producto` bigint(20) NULL,  PRIMARY KEY (`id_item_remito`, `id_remito` ), FOREIGN KEY (`id_remito`) REFERENCES `remito`( `id_remito` ) ) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;
CREATE VIEW IF NOT EXISTS `v_remito` AS SELECT r.id_remito, CONCAT( CONCAT( LPAD( r.`serie`, 5, 0 ) , '-' ) , LPAD( r.`numero`, 5, 0 ) ) AS NumSerie, c.razon_social AS cliente, r.fecha AS fecha, r.id_forma_pago, r.total AS precio, r.anulada AS anulada FROM `factura` AS r, `clientes` AS c WHERE r.id_cliente = c.id;